config: g1_example
onboard:
  control:
    - pkg: obelisk_unitree_cpp
      params:
        robot_str: G1
      executable: unitree_example_controller
      # callback_groups:
      publishers:
        - ros_parameter: pub_ctrl_setting
          topic: /obelisk/g1/ctrl
          history_depth: 10
          callback_group: None
      subscribers:
        - ros_parameter: sub_est_setting
          topic: /obelisk/g1/est_state
          history_depth: 10
          callback_group: None
        # ----- Joystick subscriber ----- #
        - ros_parameter: joystick_sub_setting
          topic: /obelisk/g1/joy
      timers:
        - ros_parameter: timer_ctrl_setting
          timer_period_sec: 0.001
          callback_group: None
  # ----- High Level/Execution FSM Controller ----- #
    - pkg: obelisk_unitree_cpp
      executable: obelisk_unitree_joystick
      # callback_groups:
      publishers:
      # ----- Execution FSM ----- #
        - ros_parameter: pub_exec_fsm_setting
          topic: /obelisk/g1/exec_fsm
          history_depth: 10
          callback_group: None
      # ----- High Level Control ----- #
        - ros_parameter: pub_ctrl_setting
          topic: /obelisk/g1/vel_cmd
          history_depth: 10
          callback_group: None
      # ----- Joystick Passthrough ----- #
        - ros_parameter: pub_joy_passthrough_setting
          topic: /obelisk/fsm_test/joy_passthrough
          history_depth: 10
          callback_group: None
      subscribers:
      # ----- Joystick subscriber ----- #
        - ros_parameter: sub_est_setting
          topic: /obelisk/g1/joy
      timers:
        - ros_parameter: timer_ctrl_setting
          timer_period_sec: 0.1
          callback_group: None
  estimation:
    - pkg: obelisk_unitree_cpp
      executable: unitree_example_estimator
      # callback_groups:
      publishers:
        - ros_parameter: pub_est_setting
          topic: /obelisk/g1/est_state
          msg_type: EstimatedState
          history_depth: 10
          callback_group: None
      subscribers:
        - ros_parameter: sub_sensor_setting
          topic: /obelisk/g1/joint_encoders
          msg_type: ObkJointEncoders
          history_depth: 10
          callback_group: None
      timers:
        - ros_parameter: timer_est_setting
          timer_period_sec: 0.001
          callback_group: None
  # sensing:
  robot:
    # === simulation ===
    # - is_simulated: True
    #   pkg: obelisk_unitree_cpp
    #   executable: obelisk_unitree_sim
    #   params:
    #     ic_keyframe: standing
    # === hardware ===
    - is_simulated: False
      pkg: obelisk_unitree_cpp
      executable: obelisk_unitree_g1_hardware
      params:
        # network_interface_name: enx6c1ff724e92e
        default_joint_names: [
          "left_hip_pitch_joint", "left_hip_roll_joint", "left_hip_yaw_joint",
          "left_knee_joint", "left_ankle_pitch_joint", "left_ankle_roll_joint",
          "right_hip_pitch_joint", "right_hip_roll_joint", "right_hip_yaw_joint",
          "right_knee_joint", "right_ankle_pitch_joint", "right_ankle_roll_joint",
          "waist_yaw_joint",
          "left_shoulder_pitch_joint", "left_shoulder_roll_joint", "left_shoulder_yaw_joint", "left_elbow_joint",
          "left_wrist_roll_joint", "left_wrist_pitch_joint", "left_wrist_yaw_joint",
          "right_shoulder_pitch_joint", "right_shoulder_roll_joint", "right_shoulder_yaw_joint", "right_elbow_joint",
          "right_wrist_roll_joint", "right_wrist_pitch_joint", "right_wrist_yaw_joint",
        ]
        user_pose: [
          -0.25,  0,  0,
          0.46, -0.25, 0,
          -0.25,  0,  0,
          0.46, -0.25, 0,
          0,
          0.07,  0.24, 0, 1.39,
          0, 0, 0,
          0.07, -0.24, 0, 1.39,
          0, 0, 0
        ]
        default_kp: [
          100., 100., 100.,       # L hip
          150., 100., 100.,       # L knee, ankle
          100., 100., 100.,       # R hip
          150., 100., 100.,       # R knee, ankle
          100.,                   # Waist
          50., 50., 40., 40.,  # L shoulder, elbow
          30., 30., 30.,       # L wrist
          50., 50., 40., 40.,  # R shoulder, elbow
          30., 30., 30.,       # R wrist
        ]
        default_kd: [
          2., 2., 2.,       # L hip
          4., 2., 2.,       # L knee, ankle
          2., 2., 2.,       # R hip
          4., 2., 2.,       # R knee, ankle
          2.,               # Waist
          2., 2., 2., 2.,   # L shoulder, elbow
          2., 2., 2.,       # L wrist
          2., 2., 2., 2.,   # R shoulder, elbow
          2., 2., 2.,       # R wrist
        ]
        default_kd_damping: [
          10., 10., 10.,       # L hip
          10., 10., 10.,       # L knee, ankle
          10., 10., 10.,       # R hip
          10., 10., 10.,       # R knee, ankle
          10.,                 # Waist
          10., 10., 10., 10.,  # L shoulder, elbow
          10., 10., 10.,       # L wrist
          10., 10., 10., 10.,  # R shoulder,  elbow
          10., 10., 10.,       # R wrist
        ]
    # ==================
      # callback_groups:
      publishers:
      # ----- Joints ----- #
        - ros_parameter: pub_sensor_setting
          topic: /obelisk/g1/joint_encoders
          history_depth: 10
      # ----- IMU ----- #
        - ros_parameter: pub_imu_setting
          topic: /obelisk/g1/pelvis_imu
          history_depth: 10
      # ----- Odom ----- #
        - ros_parameter: pub_odom_setting
          topic: /obelisk/g1/odom
          history_depth: 10
      subscribers:
      # ----- Control ----- #
        - ros_parameter: sub_ctrl_setting
          topic: /obelisk/g1/ctrl
          history_depth: 10
          callback_group: None
      # ----- Execution FSM ----- #
        - ros_parameter: sub_fsm_setting
          topic: /obelisk/g1/exec_fsm
          history_depth: 10
          callback_group: None
      # ----- High Level Control ----- #
        - ros_parameter: sub_vel_cmd_setting
          topic: /obelisk/g1/vel_cmd
          history_depth: 10
          callback_group: None
      sim:
        - ros_parameter: mujoco_setting
          n_u: 16
          time_step: 0.002
          num_steps_per_viz: 5
          robot_pkg: g1_description
          # model_xml_path: g1_27dof_fixed_base.xml
          # model_xml_path: g1_27dof.xml
          model_xml_path: g1_basic_scene.xml
          sensor_settings:
          - topic: /obelisk/g1/joint_encoders
            dt: 0.002
            msg_type: ObkJointEncoders
            sensor_names:
            # ---------- Joint Positions ---------- #
              left_hip_pitch_joint_pos_sensor: jointpos
              left_hip_roll_joint_pos_sensor: jointpos
              left_hip_yaw_joint_pos_sensor: jointpos
              left_knee_joint_pos_sensor: jointpos
              left_ankle_pitch_joint_pos_sensor: jointpos
              left_ankle_roll_joint_pos_sensor: jointpos

              right_hip_pitch_joint_pos_sensor: jointpos
              right_hip_roll_joint_pos_sensor: jointpos
              right_hip_yaw_joint_pos_sensor: jointpos
              right_knee_joint_pos_sensor: jointpos
              right_ankle_pitch_joint_pos_sensor: jointpos
              right_ankle_roll_joint_pos_sensor: jointpos

              waist_yaw_joint_pos_sensor: jointpos

              left_shoulder_pitch_joint_pos_sensor: jointpos
              left_shoulder_roll_joint_pos_sensor: jointpos
              left_shoulder_yaw_joint_pos_sensor: jointpos
              left_elbow_joint_pos_sensor: jointpos
              left_wrist_roll_joint_pos_sensor: jointpos
              left_wrist_pitch_joint_pos_sensor: jointpos
              left_wrist_yaw_joint_pos_sensor: jointpos

              right_shoulder_pitch_joint_pos_sensor: jointpos
              right_shoulder_roll_joint_pos_sensor: jointpos
              right_shoulder_yaw_joint_pos_sensor: jointpos
              right_elbow_joint_pos_sensor: jointpos
              right_wrist_roll_joint_pos_sensor: jointpos
              right_wrist_pitch_joint_pos_sensor: jointpos
              right_wrist_yaw_joint_pos_sensor: jointpos

            # ---------- Joint Velocities ---------- #
              left_hip_pitch_joint_vel_sensor: jointvel
              left_hip_roll_joint_vel_sensor: jointvel
              left_hip_yaw_joint_vel_sensor: jointvel
              left_knee_joint_vel_sensor: jointvel
              left_ankle_pitch_joint_vel_sensor: jointvel
              left_ankle_roll_joint_vel_sensor: jointvel

              right_hip_pitch_joint_vel_sensor: jointvel
              right_hip_roll_joint_vel_sensor: jointvel
              right_hip_yaw_joint_vel_sensor: jointvel
              right_knee_joint_vel_sensor: jointvel
              right_ankle_pitch_joint_vel_sensor: jointvel
              right_ankle_roll_joint_vel_sensor: jointvel

              waist_yaw_joint_vel_sensor: jointvel

              left_shoulder_pitch_joint_vel_sensor: jointvel
              left_shoulder_roll_joint_vel_sensor: jointvel
              left_shoulder_yaw_joint_vel_sensor: jointvel
              left_elbow_joint_vel_sensor: jointvel
              left_wrist_roll_joint_vel_sensor: jointvel
              left_wrist_pitch_joint_vel_sensor: jointvel
              left_wrist_yaw_joint_vel_sensor: jointvel

              right_shoulder_pitch_joint_vel_sensor: jointvel
              right_shoulder_roll_joint_vel_sensor: jointvel
              right_shoulder_yaw_joint_vel_sensor: jointvel
              right_elbow_joint_vel_sensor: jointvel
              right_wrist_roll_joint_vel_sensor: jointvel
              right_wrist_pitch_joint_vel_sensor: jointvel
              right_wrist_yaw_joint_vel_sensor: jointvel
      timers:
        - ros_parameter: timer_sensor_setting
          timer_period_sec: 0.02
          callback_group: None
        - ros_parameter: timer_logging_setting
          timer_period_sec: 0.2
          callback_group: None
  viz:
    on: True
    viz_tool: foxglove
    viz_nodes:
      - pkg: obelisk_viz_cpp
        executable: default_robot_viz
        robot_pkg: g1_description
        urdf: g1.urdf
        robot_topic: robot_description
        subscribers:
          - ros_parameter: sub_viz_est_setting
            topic: /obelisk/g1/est_state
            history_depth: 10
            callback_group: None
            non_obelisk: False
        publishers:
          - ros_parameter: pub_viz_joint_setting
            topic: joint_states
            history_depth: 10
            callback_group: None
        timers:
          - ros_parameter: timer_viz_joint_setting
            timer_period_sec: 0.01
            callback_group: None
  joystick:
    on: True
    pub_topic: /obelisk/g1/joy
    sub_topic: /obelisk/g1/joy_feedback